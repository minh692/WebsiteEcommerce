<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <script src="https://kit.fontawesome.com/8afb41633c.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/index.css">

    <!-- angular  -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-route.js"></script>  
</head>
<body ng-app="myApp" ng-controller="myCtrl">
    <div class="container-fluid d-none d-sm-block col-sm-12 p-0">
        <header class="bg-success bgtop1" style="height: 70px;">
            <img src="images/banner1.webp" alt="" style="width: 100%; height: 100%;"  >
        </header>
    </div> 
    <div class="container-fluid p-0">
      <nav class="navbar navbar-expand-sm navbar-light bg-light">
        <div class="container-fluid">
          <a href="#/!"><img src="images/logo.webp" alt="" style="width: 120px; "></a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mynavbar">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="mynavbar">
            <ul class="navbar-nav me-auto ms-auto">
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"><i class="fa-solid fa-list"></i> Danh mục</a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#!laptop">Laptop</a></li>
                  <li><a class="dropdown-item" href="#!dienthoai">Điện thoại</a></li>
                  <li><a class="dropdown-item" href="#">Máy tính bàn</a></li>
                  <li><a class="dropdown-item" href="#">Màn hình</a></li>
                  <li><hr class="dropdown-divider"></li>
                  <li><a class="dropdown-item" href="#">Chuột</a></li>
                  <li><a class="dropdown-item" href="#">Bàn phím</a></li>
                </ul>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="javascript:void(0)">Dịch vụ</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="javascript:void(0)">Tin tức</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="javascript:void(0)">Liên hệ</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#!CRUD">Hỗ trợ</a>
              </li>
            </ul>
            <form class="d-flex">
              <a href="#!cart"><button class="btn btn-light rounded-2" type="button"><i class="fa-solid fa-cart-plus"></i> Giỏ Hàng <span style="color: red;">{{tongsoluong()}}</span></button></a>
              <a href="#!signin"><button class="btn btn-light rounded-2" type="button"><i class="fa-regular fa-user"></i> Đăng Nhập</button></a>
            </form>
          </div>
        </div>
      </nav>
        </div>
    </div>

    <div ng-view></div>
    

  <footer class="container-fluid mt-3">
    <div class="row">
      <div class="col-lg-3 col-sm-6">
          <div class="single-box">
            <img src="images/logo.webp" alt="" class="p-2 mx-3"> 
            <div class="row my-3">
              <div class="col-sm-1"></i></div>
              <div class="col-sm-11">
                <p><i class="fa-solid fa-location-dot"></i><strong> Địa chỉ:</strong></p>
                <p><small>70 Lu Gia, District 11, Ho Chi Minh City</small></p>
              </div>

              <div class="col-sm-1"></i></div>
              <div class="col-sm-4">
                <p><i class="fa-solid fa-phone"></i><strong> Hotline:</strong></p>
                <p class="text-danger"><small>19006750</small></p>
              </div>

              <div class="col-sm-1"></i></div>
              <div class="col-sm-4">
                <p><i class="fa-regular fa-envelope"></i><strong> Email:</strong></p>
                <p><small>minhnn@fpt.edu.vn</small></p>
              </div>
            </div>
          </div>
      </div>
      <div class="col-lg-3 col-sm-6">
        <div class="single-box">
          <h2>Hỗ trợ khách hàng</h2>
          <ul>
            <li><a href="">Hệ thống cửa hàng</a></li>
            <li><a href="">Câu hỏi thường gặp</a></li>
            <li><a href="">Kiểm tra đơn hàng</a></li>
            <li><a href="">Liên hệ</a></li>
          </ul>
        </div>
      </div>
      <div class="col-lg-3 col-sm-6">
        <div class="single-box">
          <h2>Chính sách</h2>
          <ul>
            <li><a href="">Chính sách bảo hành</a></li>
            <li><a href="">Chính sách đổi trả</a></li>
            <li><a href="">Chính sách bảo mật</a></li>
            <li><a href="">Chính sách trả góp</a></li>
          </ul>
        </div>
      </div>
      <div class="col-lg-3 col-sm-6">
        <div class="single-box">
          <h2>Đăng ký nhận ưu đãi</h2>
          <div class="input-group mb-3">
            <input type="text" class="form-control" placeholder="Email của bạn..." aria-label="Recipient's username" aria-describedby="basic-addon2">
            <span class="input-group-text" id="basic-addon2"><i class="fa fa-long-arrow-right"></i></span>
          </div>
          <h2>Theo dõi chúng tôi tại</h2>
          <p class="socials">
            <i class="fa fa-facebook"></i>
            <i class="fa fa-youtube"></i>
            <i class="fa fa-pinterest"></i>
            <i class="fa fa-instagram"></i>
          </p>
        </div>
      </div>
    </div>
    <hr class="mb-0">
  </footer>
</body>
</html>

<script>
    var app = angular.module("myApp", ["ngRoute"]);
  app.config(function($routeProvider) {
      $routeProvider
      .when("/", {
          templateUrl : "home.html"
      })
      .when("/signin", {
          templateUrl : "signin.html",
          controller: "formController"
      })
      .when("/signup", {
          templateUrl : "signup.html",
          controller: "formController"
      })
      .when("/laptop", {
          templateUrl : "laptop.html",
          controller: "laptopController"
      })
      .when("/CRUD", {
          templateUrl : "CRUDsp.html",
          controller: "laptopController"
      })
      .when("/dienthoai", {
          templateUrl : "dienthoai.html",
          controller: "dienthoaiController"
      })
      .when("/cart", {
          templateUrl : "cart.html",
      })
      .when("/ctlaptop/:id", {
          templateUrl: "ctlt1.html",
          controller: "chitietController"
      });
  });
  
  app.controller("myCtrl", function($scope, $http, $routeParams, $rootScope){
    $scope.cart = [];
    // phân trang 
    $scope.start = 0;
    $scope.trangTruoc = function(){
      $scope.start -=6;
    }
    $scope.trangSau = function(){
      $scope.start +=6;
    }
    // thêm giỏ hàng
    $scope.themvaogio = function(sp){
        var index =  $scope.cart.findIndex( p => p.id == sp.id);
        if(index >= 0){
            $scope.cart[index].soluong++;
        }else{
            var spInCart = { id:sp.id, name:sp.name, giagiam:sp.giagiam , anh:sp.anh, soluong: 1}
            $scope.cart.push(spInCart);
        }

        $scope.tongsoluong = function(){
          var tsl = 0;
          for(i=0; i<$scope.cart.length; i++){
            tsl += $scope.cart[i].soluong
          }
          return tsl;
        }

        $scope.tongtien = function(){
          var tt = 0;
          for(i=0; i<$scope.cart.length; i++){
            tt += $scope.cart[i].soluong * $scope.cart[i].giagiam
          }
          return tt;
        }

        $scope.xoa = function(){
          $scope.cart.splice(index, 1); 
        }
       
        // console.log($scope.cart);
        }

        $scope.laptops =[];
        $scope.loadData = function(){
        $http.get("http://localhost:3000/laptop")
        .then(res=>{
        $scope.laptops = res.data
        })
      }
      $scope.loadData();

      console.log($scope.laptops)


  });
  

  app.controller("chitietController", function($scope,$http, $routeParams){
    
    $scope.id = $routeParams.id;
    $scope.mangTam = $scope.laptops.find(p => p.id ==$scope.id)
  });

</script>
<script src="js/laptop.js"></script>
<script src="js/dienthoai.js"></script>
<script src="js/form.js"></script>